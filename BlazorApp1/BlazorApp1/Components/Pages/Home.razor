@page "/home"
@inject NavigationManager NavigationManager
@inject ApplicationDbContext _context
@using Microsoft.EntityFrameworkCore
@using BlazorApp1.Data

<PageTitle>Home</PageTitle>

<style>
    .home-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        overflow-y: auto;
        max-height: 90vh;
        padding: 20px;
    }

    .image-item {
        display: flex;
        align-items: flex-start;
        padding: 15px;
        width: 1500px;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        transition: transform 0.05s;
    }

    .image-item img {
        width: 150px;
        height: 150px;
        object-fit: cover;
        border-radius: 4px;
        margin-right: 20px;
    }

    .image-item .text-content {
        display: flex;
        flex-direction: column;
    }

    .image-item p {
        margin: 5px 0;
    }

    .image-item:hover {
        transform: scale(1.02);
    }

    .status-tag {
        background-color: #f2f2f2;
        color: #000;
        padding: 5px 10px;
        border-radius: 12px;
        font-weight: bold;
        align-self: flex-start;
    }

    .status-sold {
        background-color: red;
        color: white;
    }

    .status-bid {
        background-color: green;
        color: white;
    }

    .status-pending {
        background-color: darkorange;
        color: white;
    }
</style>

<div class="home-container">
    @foreach (var artwork in Artworks)
    {
        <div class="image-item" @onclick="() => NavigateToArtwork(artwork.Id)">
            <img src="@artwork.ImageUrl" alt="@artwork.Name" />
            <div class="text-content">
                <p><strong>@artwork.Name</strong></p>
                <p>@artwork.Medium</p>
                <p>@artwork.Description</p>
                <p class="status-tag @(artwork.Status == "SOLD" ? "status-sold" : artwork.Status == "PENDING" ? "status-pending" : "status-bid")">
                    @artwork.Status
                </p>
            </div>
        </div>
    }
</div>

@code {
    private List<Artwork> Artworks { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        // Fetch artwork data from the database
        Artworks = await _context.Artworks.ToListAsync();
    }

    private void NavigateToArtwork(int artworkId)
    {
        NavigationManager.NavigateTo($"/artwork/{artworkId}");
    }
}
